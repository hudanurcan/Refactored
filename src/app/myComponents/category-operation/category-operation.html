<!-- <table>
  <tr>
    <th>Id</th>
    <th>İsim</th>
    <th>Açıklama</th>
    <th>İşlemler</th>
  </tr>

  @for(category of categories();track category.id){
  <tr>
    <td>{{ category.id }}</td>
    <td>{{ category.categoryName }}</td>
    <td>{{ category.description }}</td>
    <td>
      <button (click)="startUpdate(category)">Güncelle</button>
      <button (click)="onDelete(category.id)">Sil</button>
    </td>
  </tr>
  }
</table>

<hr />

<form [formGroup]="createForm" (ngSubmit)="onCreate()">
  <h3>Kategori Ekle</h3>
  <label>
    İsim

    <input type="text" formControlName="name" />
  </label>
  @if(getErrorMessageByName(createForm,'name'); as msg){
  <div class="error">
    {{ msg }}
  </div>
  }

  <label>
    Açıklama
    <input type="text" formControlName="description" />
  </label>

  @if(getErrorMessageByName(createForm,'description'); as msg){
  <div class="error">
    {{ msg }}
  </div>
  }

  <button type="submit" [disabled]="createForm.invalid">Ekle</button>
</form>

<hr />
@if(selectedCategory() !==null){
<form [formGroup]="updateForm" (ngSubmit)="onUpdate()">
  <h3>Kategori güncelle</h3>

  <input type="hidden" formControlName="id" />

  <div class="form-group">
    <label>İsim</label>
    <input type="text" formControlName="name" placeholder="Kategori adı girin..." />
    @if(getErrorMessageByName(createForm,'name'); as msg){
      <span class="error-text">{{ msg }}</span>
    }
  </div>
  @if(getErrorMessageByName(updateForm,'name'); as msg){
  <div class="error">
    {{ msg }}
  </div>
  }

  <label>
    Açıklama
    <input type="text" formControlName="description" />
  </label>
  @if(getErrorMessageByName(updateForm,'description'); as msg){
  <div class="error">
    {{ msg }}
  </div>
  }

  <button type="submit" [disabled]="updateForm.invalid">Güncelle</button>

  <button type="button" (click)="cancelUpdate()">İptal</button>
</form>
} -->

<div class="card">
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>İsim</th>
        <th>Açıklama</th>
        <th>İşlemler</th>
      </tr>
    </thead>
    <tbody>
      @for(category of categories(); track category.id){
      <tr>
        <td>{{ category.id }}</td>
        <td>{{ category.categoryName }}</td>
        <td>{{ category.description }}</td>
        <td class="actions">
          <button class="btn-edit" (click)="startUpdate(category)">Güncelle</button>
          <button class="btn-delete" (click)="onDelete(category.id)">Sil</button>
        </td>
      </tr>
      }
    </tbody>
  </table>
</div>

<hr />

<form [formGroup]="createForm" (ngSubmit)="onCreate()" class="admin-form">
  <h3>Kategori Ekle</h3>
  
  <div class="form-row">
    <div class="field-wrapper">
      <label>İsim</label>
      <input type="text" formControlName="name" placeholder="Kategori adı..." />
      @if(getErrorMessageByName(createForm, 'name'); as msg){
        <span class="error-msg">{{ msg }}</span>
      }
    </div>

    <div class="field-wrapper">
      <label>Açıklama</label>
      <input type="text" formControlName="description" placeholder="Açıklama..." />
      @if(getErrorMessageByName(createForm, 'description'); as msg){
        <span class="error-msg">{{ msg }}</span>
      }
    </div>

    <button type="submit" [disabled]="createForm.invalid" class="btn-add">Ekle</button>
  </div>
</form>